<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script language="javascript" type="text/javascript">
		function update () {
			var temp = $.ajax({ type: "GET",   
                        url: "tugs.dat",
						async: false
						}).responseText;
			console.log(temp);
			var tugs = JSON.parse(temp);
			var tugsk = Object.keys(tugs);
			
			
			var temp = $.ajax({ type: "GET",   
                        url: "queue.dat",
						async: false
						}).responseText;
			console.log(temp);
			var queue = JSON.parse(temp);
			var queuek = Object.keys(queue);
			var tugshtml = "";
			var queuehtml = "";
			var n = 0, max = 0, p = 0;
			
			for(i=0; i < tugsk.length; i++) {
				n = tugs[tugsk[i]][0];
				max = tugs[tugsk[i]][1];
				p = Math.floor(n / max * 100);
				tugshtml = tugshtml + "<b>" + tugsk[i] + ":</b> " + p.toString() + "%<br />";
			}
			
			for(i=0; i < queuek.length; i++) {
				n = queue[queuek[i]];
				queuehtml = queuehtml + "<b>" + queuek[i] + ":</b> " + n.toString() + " votes<br />";
			}
			$("#tugs").html(tugshtml);
			$("#queue").html(queuehtml)
		}
		update();
		setInterval(function(){
			update() // this will run after every 5 seconds
		}, 1000);
		</script>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div id="container">
			<div id="tugs">
				JS not working
			</div>
			
			<div id="queue">
				JS not working
			</div>
		</div>
	</body>
</html>